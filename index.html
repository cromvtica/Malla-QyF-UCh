<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Malla Curricular Interactiva Completa</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #fff0f6;
    padding: 20px;
  }
  h2 {
    color: #c71585;
  }
  .semestre {
    margin-bottom: 30px;
  }
  .ramo {
    cursor: pointer;
    border: 2px solid #d8bfd8;
    background-color: #fce4ec;
    padding: 10px;
    margin: 5px 0;
    border-radius: 6px;
    user-select: none;
    transition: background-color 0.3s, border-color 0.3s;
  }
  .bloqueado {
    background-color: #e0e0e0;
    border-color: #ccc;
    cursor: not-allowed;
    color: #888;
  }
  .desbloqueado {
    background-color: #ffc0cb;
    border-color: #ff69b4;
    color: #333;
  }
  .aprobado {
    background-color: #c71585;
    border-color: #8b008b;
    color: white;
  }
</style>
</head>
<body>

<h1>Malla Curricular Interactiva Completa</h1>

<!-- Primer Semestre -->
<div class="semestre" id="sem1">
  <h2>Primer Semestre</h2>
  <div class="ramo desbloqueado" data-id="qg1" data-prereqs="">Química General I</div>
  <div class="ramo desbloqueado" data-id="tlq" data-prereqs="">Técnicas de Laboratorio Químico</div>
  <div class="ramo desbloqueado" data-id="mec" data-prereqs="">Mecánica</div>
  <div class="ramo desbloqueado" data-id="calc1" data-prereqs="">Introducción al Cálculo</div>
  <div class="ramo desbloqueado" data-id="qfa" data-prereqs="">Químico Farmacéutico y su Acción</div>
  <div class="ramo desbloqueado" data-id="ing1" data-prereqs="">Inglés I</div>
</div>

<!-- Segundo Semestre -->
<div class="semestre" id="sem2">
  <h2>Segundo Semestre</h2>
  <div class="ramo bloqueado" data-id="qg2" data-prereqs="qg1">Química General II</div>
  <div class="ramo bloqueado" data-id="ti" data-prereqs="tlq">Técnicas Instrumentales</div>
  <div class="ramo bloqueado" data-id="fis" data-prereqs="mec">Física</div>
  <div class="ramo bloqueado" data-id="calc2" data-prereqs="calc1">Cálculo II</div>
  <div class="ramo bloqueado" data-id="qo1" data-prereqs="qg1">Química Orgánica I</div>
  <div class="ramo bloqueado" data-id="ing2" data-prereqs="ing1">Inglés II</div>
</div>

<!-- Tercer Semestre -->
<div class="semestre" id="sem3">
  <h2>Tercer Semestre</h2>
  <div class="ramo bloqueado" data-id="qo2" data-prereqs="qo1">Química Orgánica II</div>
  <div class="ramo bloqueado" data-id="bio" data-prereqs="qfa">Biología</div>
  <div class="ramo bloqueado" data-id="estat" data-prereqs="calc2">Estadística</div>
  <div class="ramo bloqueado" data-id="ing3" data-prereqs="ing2">Inglés III</div>
</div>

<!-- Cuarto Semestre -->
<div class="semestre" id="sem4">
  <h2>Cuarto Semestre</h2>
  <div class="ramo bloqueado" data-id="fito" data-prereqs="bio">Fitoquímica</div>
  <div class="ramo bloqueado" data-id="bioquim" data-prereqs="qo2">Bioquímica</div>
  <div class="ramo bloqueado" data-id="micro" data-prereqs="bio">Microbiología</div>
  <div class="ramo bloqueado" data-id="ing4" data-prereqs="ing3">Inglés IV</div>
</div>

<!-- Quinto Semestre -->
<div class="semestre" id="sem5">
  <h2>Quinto Semestre</h2>
  <div class="ramo bloqueado" data-id="farmaco" data-prereqs="bioquim">Farmacología</div>
  <div class="ramo bloqueado" data-id="analit" data-prereqs="bioquim,ti">Análisis Químico</div>
  <div class="ramo bloqueado" data-id="genet" data-prereqs="micro">Genética</div>
  <div class="ramo bloqueado" data-id="ing5" data-prereqs="ing4">Inglés V</div>
</div>

<!-- Sexto Semestre -->
<div class="semestre" id="sem6">
  <h2>Sexto Semestre</h2>
  <div class="ramo bloqueado" data-id="biotecn" data-prereqs="genet">Biotecnología</div>
  <div class="ramo bloqueado" data-id="toxic" data-prereqs="farmaco">Toxicología</div>
  <div class="ramo bloqueado" data-id="bioinfo" data-prereqs="estat,biotecn">Bioinformática</div>
  <div class="ramo bloqueado" data-id="ing6" data-prereqs="ing5">Inglés VI</div>
</div>

<!-- Séptimo Semestre -->
<div class="semestre" id="sem7">
  <h2>Séptimo Semestre</h2>
  <div class="ramo bloqueado" data-id="farmacog" data-prereqs="farmaco">Farmacognosia</div>
  <div class="ramo bloqueado" data-id="medicinal" data-prereqs="bioquim,farmaco">Química Medicinal</div>
  <div class="ramo bloqueado" data-id="seminario" data-prereqs="ing6">Seminario de Investigación</div>
</div>

<!-- Octavo Semestre -->
<div class="semestre" id="sem8">
  <h2>Octavo Semestre</h2>
  <div class="ramo bloqueado" data-id="proyecto" data-prereqs="seminario">Proyecto de Título</div>
  <div class="ramo bloqueado" data-id="practica" data-prereqs="proyecto">Práctica Profesional</div>
</div>

<script>
  const ramos = document.querySelectorAll('.ramo');
  const ramosArray = Array.from(ramos);
  const estadoRamos = {};

  // Inicializar estados desde clases CSS
  ramosArray.forEach(ramo => {
    if (ramo.classList.contains('aprobado')) estadoRamos[ramo.dataset.id] = 'aprobado';
    else if (ramo.classList.contains('desbloqueado')) estadoRamos[ramo.dataset.id] = 'desbloqueado';
    else estadoRamos[ramo.dataset.id] = 'bloqueado';
  });

  function actualizarDesbloqueo() {
    ramosArray.forEach(ramo => {
      if (estadoRamos[ramo.dataset.id] === 'aprobado') return;

      const prereqs = ramo.dataset.prereqs.split(',').filter(x => x);
      if (prereqs.length === 0) {
        estadoRamos[ramo.dataset.id] = 'desbloqueado';
      } else {
        const todosAprobados = prereqs.every(id => estadoRamos[id] === 'aprobado');
        estadoRamos[ramo.dataset.id] = todosAprobados ? 'desbloqueado' : 'bloqueado';
      }
    });
  }

  function actualizarClases() {
    ramosArray.forEach(ramo => {
      ramo.classList.remove('bloqueado', 'desbloqueado', 'aprobado');
      ramo.classList.add(estadoRamos[ramo.dataset.id]);
    });
  }

  function onClickRamo(event) {
    const ramo = event.currentTarget;
    const id = ramo.dataset.id;
    const estado = estadoRamos[id];

    if (estado === 'bloqueado') return;

    if (estado === 'desbloqueado') estadoRamos[id] = 'aprobado';
    else if (estado === 'aprobado') estadoRamos[id] = 'desbloqueado';

    actualizarDesbloqueo();
    actualizarClases();
  }

  ramosArray.forEach(ramo => {
    ramo.addEventListener('click', onClickRamo);
  });

  actualizarDesbloqueo();
  actualizarClases();
</script>

</body>
</html>

